<UserControl
    x:Class="Scrubbler.Host.Presentation.Plugins.InstalledPluginsView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:vm="using:Scrubbler.Host.Presentation.Plugins"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    d:DataContext="{d:DesignInstance Type=vm:InstalledPluginsViewModel}">

    <Grid Padding="12">
        <ListView ItemsSource="{Binding Plugins, Mode=OneWay}">
            <ListView.ItemTemplate>
                <DataTemplate x:DataType="vm:InstalledPluginViewModel">
                    <Grid ColumnDefinitions="Auto,*,Auto,Auto" Padding="8" Margin="0,0,0,8">
                        <!-- Icon -->
                        <Image Source="{Binding Icon}" Width="64" Height="64" VerticalAlignment="Center"/>

                        <!-- Info -->
                        <StackPanel Grid.Column="1" Margin="12,0,0,0">
                            <TextBlock Text="{x:Bind Name}"
                                       Style="{ThemeResource SubtitleTextBlockStyle}" />
                            <TextBlock Text="{x:Bind PluginType}" Foreground="White" FontSize="12"/>
                            <TextBlock Text="{x:Bind Description}"
                                       TextTrimming="CharacterEllipsis"
                                       Foreground="Gray" FontSize="12"/>
                            <TextBlock Text="{x:Bind Version}"
                                       Foreground="Gray" FontSize="12"/>
                        </StackPanel>

                        <!-- Action -->
                        <Button Grid.Column="2"
                                Command="{x:Bind UninstallCommand}"
                                VerticalAlignment="Center">
                            <Button.Content>
                                <SymbolIcon Symbol="Delete"/>
                            </Button.Content>
                        </Button>

                        <Button Grid.Column="3"
                                Command="{x:Bind UpdateCommand}"
                                VerticalAlignment="Center"
                                Visibility="{Binding CanBeUpdated, Converter={StaticResource BoolToVis}}">
                            <Button.Content>
                                <SymbolIcon Symbol="PostUpdate"/>
                            </Button.Content>
                        </Button>
                    </Grid>
                </DataTemplate>
            </ListView.ItemTemplate>
        </ListView>

        <Grid Visibility="{Binding IsBusy, Converter={StaticResource BoolToVis}}" Background="#80000000" IsHitTestVisible="True">
            <ProgressRing IsIndeterminate="True" VerticalAlignment="Center" HorizontalAlignment="Center"/>
        </Grid>
    </Grid>
</UserControl>
