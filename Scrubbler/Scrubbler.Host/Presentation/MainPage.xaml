<Page x:Class="Scrubbler.Host.Presentation.MainPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:local="using:Scrubbler.Host.Presentation"
      xmlns:navigation="using:Scrubbler.Host.Presentation.Navigation"
      xmlns:muxc="using:Microsoft.UI.Xaml.Controls"
      Background="{ThemeResource BackgroundBrush}">

    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <!-- Sidebar -->
        <muxc:NavigationView
            MenuItemsSource="{Binding Items}"
            SelectedItem="{Binding SelectedItem, Mode=TwoWay}"
            IsBackButtonVisible="Collapsed"
            IsPaneToggleButtonVisible="True"
            PaneDisplayMode="Left"
            Grid.Column="0">

            <muxc:NavigationView.MenuItemTemplate>
                <DataTemplate x:DataType="navigation:NavigationItemViewModel">
                    <muxc:NavigationViewItem Content="{x:Bind Title}"
                                             SelectsOnInvoked="{x:Bind HasChildren, Mode=OneWay, Converter={StaticResource InverseBooleanConverter}}">
                        <muxc:NavigationViewItem.Icon>
                            <muxc:IconSourceElement IconSource="{x:Bind Icon}" />
                        </muxc:NavigationViewItem.Icon>
                        <muxc:NavigationViewItem.MenuItemsSource>
                            <Binding Path="Children" />
                        </muxc:NavigationViewItem.MenuItemsSource>
                    </muxc:NavigationViewItem>
                </DataTemplate>
            </muxc:NavigationView.MenuItemTemplate>
        </muxc:NavigationView>

        <!-- Plugin or Page View -->
        <ContentPresenter Content="{Binding CurrentViewModel}"
                          ContentTemplateSelector="{StaticResource ViewLocatorSelector}"
                          Grid.Column="1"/>

        <!-- Global InfoBar -->
        <InfoBar x:Name="GlobalInfoBar" Grid.Column="1"
             Title="Notification"
             IsOpen="False"
             HorizontalAlignment="Center"
             VerticalAlignment="Top"
             Margin="16"
             IsClosable="False" />
    </Grid>
</Page>
